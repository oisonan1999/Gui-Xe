CREATE DATABASE DEMO
USE DEMO
CREATE TABLE GUIXE_TEMP
(
ID int IDENTITY(1,1) PRIMARY KEY,
BIENSO CHAR(15),
THOIGIAN DATETIME
)
GO


SELECT * FROM dbo.GUIXE_TEMP

CREATE TABLE GUIXE_STORE
(
ID int PRIMARY KEY,
BIENSO CHAR(15),
THOIGIAN_gui DATETIME,
THOIGIAN_lay DATETIME
)
GO

SELECT * FROM dbo.GUIXE_STORE

CREATE VIEW ttien1
AS
	SELECT ID,DATEDIFF(DAY,THOIGIAN_gui,THOIGIAN_lay) as [TGIAN]
	FROM GUIXE_STORE
GO

SELECT * FROM dbo.ttien1

ALTER VIEW ttien1
AS
 SELECT ID,DATEDIFF(DAY,THOIGIAN_gui,THOIGIAN_lay) as [TGIAN]
 FROM	GUIXE_STORE
GO

CREATE VIEW ttien2
AS
	SELECT ID,5000*([TGIAN]+1) AS [GIATIEN]
	FROM ttien1
GO


SELECT * FROM dbo.ttien2

create PROCEDURE TINHTIEN
@maid int
AS
	BEGIN 
	SELECT GIATIEN
	FROM ttien2
	WHERE ID=@maid
END
GO

DROP PROCEDURE dbo.TINHTIEN


